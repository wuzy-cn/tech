<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>A Lightweight Microservice Traffic Manager by eBPF - Eternal Sunshine</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Eternal Sunshine"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Eternal Sunshine"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="This article explains the design and implementation ideas of a lightweight microservice traffic management project based on eBPF. 本文介绍了一个基于 eBPF 的轻量级微服务流量管理工具的设计和实现思想。"><meta property="og:type" content="blog"><meta property="og:title" content="A Lightweight Microservice Traffic Manager by eBPF"><meta property="og:url" content="http://tech.wuzy.cn/p/ebpf-traffic-manager/"><meta property="og:site_name" content="Eternal Sunshine"><meta property="og:description" content="This article explains the design and implementation ideas of a lightweight microservice traffic management project based on eBPF. 本文介绍了一个基于 eBPF 的轻量级微服务流量管理工具的设计和实现思想。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://tech.wuzy.cn/p/ebpf-traffic-manager/architecture.svg"><meta property="article:published_time" content="2023-09-21T02:58:55.000Z"><meta property="article:modified_time" content="2023-10-21T06:20:58.892Z"><meta property="article:author" content="吴征阳"><meta property="article:tag" content="BPF"><meta property="article:tag" content="Kubernetes"><meta property="article:tag" content="microservice"><meta property="article:tag" content="AI Ops"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://tech.wuzy.cn/p/ebpf-traffic-manager/architecture.svg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://tech.wuzy.cn/p/ebpf-traffic-manager/"},"headline":"A Lightweight Microservice Traffic Manager by eBPF","image":[],"datePublished":"2023-09-21T02:58:55.000Z","dateModified":"2023-10-21T06:20:58.892Z","author":{"@type":"Person","name":"吴征阳"},"publisher":{"@type":"Organization","name":"Eternal Sunshine","logo":{"@type":"ImageObject","url":"http://tech.wuzy.cn/img/logo_384×88.png"}},"description":"This article explains the design and implementation ideas of a lightweight microservice traffic management project based on eBPF. 本文介绍了一个基于 eBPF 的轻量级微服务流量管理工具的设计和实现思想。"}</script><link rel="canonical" href="http://tech.wuzy.cn/p/ebpf-traffic-manager/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><script data-ad-client="ca-pub-3998141787090318" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><meta name="follow.it-verification-code" content="NxfXBXRGUBTXq3CzsSFv"><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Eternal Sunshine" type="application/atom+xml">
</head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo_384%C3%9788.png" alt="Eternal Sunshine" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="fill" src="/p/ebpf-traffic-manager/architecture.svg" alt="A Lightweight Microservice Traffic Manager by eBPF"></span></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-09-21T02:58:55.000Z" title="9/21/2023, 10:58:55 AM">2023年9月21日</time>发表</span><span class="level-item"><time dateTime="2023-10-21T06:20:58.892Z" title="10/21/2023, 2:20:58 PM">2023年10月21日</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Cloud-Native/">Cloud Native</a></span><span class="level-item">7 分钟读完 (共1093字)</span></div></div><h1 class="title is-3 is-size-4-mobile">A Lightweight Microservice Traffic Manager by eBPF</h1><div class="content"><p>This article explains the design and implementation ideas of a lightweight microservice traffic management project based on eBPF.</p>
<p>本文介绍了一个基于 eBPF 的轻量级微服务流量管理工具的设计和实现思想。 </p>
<hr>
<p>In microservice system, during peak traffic periods, the entire microservice cluster experiences high load. Especially when the load surpasses the cluster’s maximum capacity, it can lead to excessive load on specific nodes, rendering them unable to process subsequent requests.</p>
<p>Furthermore, in a microservice system, there are cascading dependencies between service instances. If downstream service instance nodes fail, it can cause upstream service instances to enter a waiting or crashing state. Therefore, there is a need to proactively reject potentially failing requests to achieve quick failure.</p>
<p>Currently, the process of fast request failure requires invasive methods like implementing sidecars or using iptables. However, these methods often suffer from performance and operability issues. Hence, there is a need to efficiently determine and redirect request traffic using Linux kernel’s eBPF technology, ensuring that traffic is always directed towards available service instances.</p>
<p>As a result, this project leverages eBPF technology in combination with microservice techniques to establish a non-intrusive mechanism for determining and redirecting microservice request traffic. Key capabilities include replacing a large number of iptables lookups and NATs for service requests, supporting fast weighted backend pod selection techniques (instead of random selection), facilitating kernel-level microservice canary testing, and dynamically adjusting the weight assigned to backend pod selection based on external performance metrics (enabling dynamic traffic allocation based on performance metric changes).</p>
<h2 id="Overall-Architecture"><a href="#Overall-Architecture" class="headerlink" title="Overall Architecture"></a>Overall Architecture</h2><p>The following is the overall architecture of the project:</p>
<p><img src="/p/ebpf-traffic-manager/architecture.svg" alt="Architecture"></p>
<p>TrafficManager will collect data from multiple sources, including cluster metadata information from Kubernetes, availability and performance data from metric monitoring systems or AI Ops systems. After comprehensive analysis, it will distribute Pod handling and selection logic into kernel-mode Control Map and Data Map. Kernel-mode monitoring and operations begin after attaching the eBPF program.</p>
<p>When Pods within the cluster initiate requests to specific services (e.g., <code>http://&lt;svc&gt;.&lt;ns&gt;.svc.cluster.local</code>), the eBPF program attached by TrafficManager intercepts the execution of connect(2) system call. After identifying, analyzing, rendering a verdict, and performing redirection, it completes user-transparent modifications of request, allowing redirection to a new target Pod. At this point, the request will smoothly traverse the overlay network and directly reach the target Pod on the target node (<code>http://&lt;pod&gt;.&lt;svc&gt;.&lt;ns&gt;.svc.cluster.local</code>).</p>
<h2 id="Design-and-Implementation"><a href="#Design-and-Implementation" class="headerlink" title="Design and Implementation"></a>Design and Implementation</h2><h3 id="Abstraction-and-Storage-Design"><a href="#Abstraction-and-Storage-Design" class="headerlink" title="Abstraction and Storage Design"></a>Abstraction and Storage Design</h3><p>For eBPF, when we need to pass user-space data to kernel-space, we must utilize eBPF Map. However, eBPF Maps are mostly key-value pairs, which are not conducive to storing the complex information of Pods, Services, and other entities in their original form. Therefore, it is essential to consider the abstraction of these fields and their mapping relationships. As a result, we have divided this part into two maps based on their functions: Data Map and Control Map.</p>
<h4 id="Data-Map"><a href="#Data-Map" class="headerlink" title="Data Map"></a>Data Map</h4><p>The Data Map is solely used to store metadata for backend Pods and is indexed using unique identifiers. It serves as data storage.</p>
<p><img src="/p/ebpf-traffic-manager/data-map.svg" alt="Data Map"></p>
<h4 id="Control-Map"><a href="#Control-Map" class="headerlink" title="Control Map"></a>Control Map</h4><p>The Control Map is used to swiftly analyze the current cluster’s operational status and select an appropriate result to modify the current request based on pre-defined action rules when a request is detected. In its design, it uses target IP, target port, and an index number for lookups.</p>
<p>When the index number is 0, it is typically used to analyze the current service’s status and necessitates a secondary lookup to select a backend Pod. Different behaviors correspond to different formats of the “Options” field to achieve several functionalities within this project.</p>
<p><img src="/p/ebpf-traffic-manager/control-map.svg" alt="Control Map"></p>
<h3 id="Traffic-Control-Methods"><a href="#Traffic-Control-Methods" class="headerlink" title="Traffic Control Methods"></a>Traffic Control Methods</h3><p>Based on the introduction above, we can discern the defined data structures. Here is an explanation of how these data structures are utilized. Please note that these usage methods may be changed or expanded as development progresses.</p>
<p><img src="/p/ebpf-traffic-manager/traffic-control.svg" alt="Traffic Control"></p>
<p>For the standard backend selection method based on random lookup, we set the index number to 0 and perform a combined lookup in the Control Map using the target IP and port of the current request. This allows us to determine the number of backend Pods of this Service. For example, for Service 1, as illustrated above, there are two backend Pods. Selection is then done based on a 50% distribution, using a random Pod index as the index number for the lookup. After obtaining the Backend ID, we can look up the destination Pod’s IP and port in Data Map.</p>
<p>For the weight-based selection method (as seen in the above diagram for Service 2 - old), the initial steps are the same as random lookup selection, but there is an additional field indicating the selection probability (i.e., weight) of the current Pod. The eBPF program employs an $O(log_2(n))$ complexity algorithm to choose a suitable backend Pod.</p>
<p>For services marked for traffic canary (as seen in the above diagram for Service 2 - new), there are additional fields to control the selection of the older version service. The selection process for other Pods is similar to the weight-based selection method. However, if the older version service is chosen as the destination for traffic based on weight, we retrieve relevant information for the older version service from Data Map and perform backend Pod selection through a <strong>separate</strong> lookup process (as shown in the diagram for Service 2 - old).</p>
<h3 id="Dynamic-Traffic-Management"><a href="#Dynamic-Traffic-Management" class="headerlink" title="Dynamic Traffic Management"></a>Dynamic Traffic Management</h3><p>With this project, we can achieve dynamic traffic management to address various cluster states. The diagram below outlines a dynamic traffic management approach based on load metrics.</p>
<p><img src="/p/ebpf-traffic-manager/dynamic-control.svg" alt="Dynamic Traffic"></p>
<p>After obtaining load metrics through monitoring tools like Node Exporter, cAdvisor, etc., the data is stored in Prometheus. These metrics will be used to assess the availability of the cluster, nodes, and individual Pods. The assessment can be based on traditional metric calculations or incorporate AI Ops techniques for more sophisticated evaluations.</p>
<p>Once the availability of the cluster, nodes, and individual Pods has been calculated, TrafficManager will perform comprehensive assessments and design corresponding strategies for the service. These strategies may include traffic handling methods, identification of non-functioning Pods, and traffic allocation proportions for each Pod.</p>
<p>Finally, this information is distributed to the kernel space through eBPF maps and programs for request handling.</p>
</div><div class="article-licensing box"><div class="licensing-title"><p>A Lightweight Microservice Traffic Manager by eBPF</p><p><a href="http://tech.wuzy.cn/p/ebpf-traffic-manager/">http://tech.wuzy.cn/p/ebpf-traffic-manager/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>吴征阳</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2023年9月21日</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2023年10月21日</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/BPF/">BPF</a><a class="link-muted mr-2" rel="tag" href="/tags/Kubernetes/">Kubernetes</a><a class="link-muted mr-2" rel="tag" href="/tags/microservice/">microservice</a><a class="link-muted mr-2" rel="tag" href="/tags/AI-Ops/">AI Ops</a></div><div class="sharethis-inline-share-buttons"></div><script src="https://platform-api.sharethis.com/js/sharethis.js#property=64b618cf1eccb80014dab4f0&amp;product=inline-share-buttons" defer></script></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/p/is-google-cloud-run-really-a-knative/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">【译】Google Cloud Run 和 Knative 真的一样吗</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/p/hello-world/"><span class="level-item">Hello World</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div id="comment-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js"></script><script>var gitalk = new Gitalk({
            id: "3ac658b37d3a9078392fd8e4e1c59b90",
            repo: "tech",
            owner: "wuzy-cn",
            clientID: "37119446531098242f07",
            clientSecret: "cc28378b05283670d07af46d040f2925713ee443",
            admin: ["wuzy-cn","ESWZY"],
            createIssueManually: true,
            distractionFreeMode: false,
            perPage: 20,
            pagerDirection: "last",
            
            
            enableHotKey: true,
            language: "zh-CN",
        })
        gitalk.render('comment-container')</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/avatar_256%C3%97256.jpeg" alt="My Eternal Sunshine"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">My Eternal Sunshine</p><p class="is-size-6 is-block">So awesome🧣</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">4</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">2</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">8</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/ESWZY" target="_blank" rel="noopener">Like!</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/ESWZY"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Linkedin" href="https://www.linkedin.com/in/wuzy/"><i class="fab fa-linkedin"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/eswzy"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Stack Overflow" href="https://stackoverflow.com/users/12866353/武状元-woa"><i class="fab fa-stack-overflow"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Youtube" href="https://www.youtube.com/@eswzy"><i class="fab fa-youtube"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://wuzy.cn" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Main (in construction)</span></span><span class="level-right"><span class="level-item tag">wuzy.cn</span></span></a></li><li><a class="level is-mobile" href="https://gallery.wuzhengyang.cn/demo/spherical-panorama/viewer.html" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Gallery</span></span><span class="level-right"><span class="level-item tag">gallery.wuzhengyang.cn</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/AI-Ops/"><span class="tag">AI Ops</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BPF/"><span class="tag">BPF</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Knative/"><span class="tag">Knative</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Kubernetes/"><span class="tag">Kubernetes</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux/"><span class="tag">Linux</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/microservice/"><span class="tag">microservice</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/performance/"><span class="tag">performance</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/serverless/"><span class="tag">serverless</span><span class="tag">1</span></a></div></div></div></div></div><div class="card widget" data-type="adsense"><div class="card-content"><div class="menu"><h3 class="menu-label">广告</h3><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-3998141787090318" data-ad-slot="f08c47fec0942fa0" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Cloud-Native/"><span class="level-start"><span class="level-item">Cloud Native</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/test/"><span class="level-start"><span class="level-item">test</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-10-21T06:00:00.000Z">2023年10月21日</time></p><p class="title"><a href="/p/performance-analysis-methodology/">性能分析方法论及策略——传统方法与 BPF 方法</a></p><p class="categories"><a href="/categories/Cloud-Native/">Cloud Native</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-09-21T03:44:07.000Z">2023年9月21日</time></p><p class="title"><a href="/p/is-google-cloud-run-really-a-knative/">【译】Google Cloud Run 和 Knative 真的一样吗</a></p><p class="categories"><a href="/categories/Cloud-Native/">Cloud Native</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-09-21T02:58:55.000Z">2023年9月21日</time></p><p class="title"><a href="/p/ebpf-traffic-manager/">A Lightweight Microservice Traffic Manager by eBPF</a></p><p class="categories"><a href="/categories/Cloud-Native/">Cloud Native</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-07-17T04:09:40.444Z">2023年7月17日</time></p><p class="title"><a href="/p/hello-world/">Hello World</a></p><p class="categories"><a href="/categories/test/">test</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2023/"><span class="level-start"><span class="level-item">2023</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="https://api.follow.it/subscription-form/aG4wUmJ0RnVXRE5oL3JRZyt2bFEzWTQxR0xiRFdVVUVUK3ZGNUtTZWZDYmo3Qy9jajFoRUlZdExFY3ZXaW1XUHE3N0hGMlQ4czlwSzd1aVlrbEhna1hwOW0yUjd5RTZtRUl0Mk1rZ0Y5b2lpYkk4d2ZMVWN3YnlEUSs2d3NGUXd8OGZZelc3VXk1V3A1NUljSmE0eFZZNTJaL3VjNWtSaWwyVEVXTkNMYWwvVT0=/8" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo_384%C3%9788.png" alt="Eternal Sunshine" height="28"></a><p class="is-size-7"><span>&copy; 2023 吴征阳</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">© 2023 tech.wuzy.cn  <a target="_blank" rel="noopener" href="https://beian.miit.gov.cn/">辽ICP备2023007095号</a></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.9/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>